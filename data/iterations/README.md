# Iterations Data Directory

This directory contains all data files related to vocabulary expansion iterations.

## File Naming Convention

All iteration-related files follow this standard naming pattern:

```
iterN_<type>.json
```

Where:
- `N` = iteration number (5, 6, 7, 8, etc.)
- `<type>` = file type (see below)

## File Types

### `iterN_candidates.json`
**Purpose:** List of unknown words identified as potential candidates for vocabulary addition  
**Generated by:** `scripts/word_frequency.py`  
**Usage:** 
```bash
python scripts/word_frequency.py --min-freq 3 --top 50 --format json --output data/iterations/iterN_candidates.json
```

### `iterN_extended.json`
**Purpose:** Extended candidate list (typically 100+ candidates) for comprehensive analysis  
**Generated by:** `scripts/word_frequency.py`  
**Usage:**
```bash
python scripts/word_frequency.py --min-freq 2 --top 100 --format json --output data/iterations/iterN_extended.json
```

### `iterN_proposals.json`
**Purpose:** Final vocabulary proposals with morphological analysis and confidence scores  
**Generated by:** Manual analysis (AI agent or human researcher)  
**Format:**
```json
[
  {
    "word": "example",
    "latin": "exemplum",
    "description": "...",
    "frequency": 5,
    "confidence": 0.75,
    "morphology": "ex + ample",
    "reasoning": "...",
    "contexts": ["herbal"],
    "tier": 1
  }
]
```

### `iterN_high_priority.json`
**Purpose:** Subset of candidates marked as high priority for analysis  
**Generated by:** Filtering candidates based on priority score  
**Usage:** Optional filtering step

## Workflow

1. **Analysis Phase:**
   ```bash
   # Generate candidates list
   python scripts/word_frequency.py --min-freq 3 --top 50 \
     --format json --output data/iterations/iterN_candidates.json
   ```

2. **Morphological Analysis:**
   ```bash
   # Analyze candidates with morphology_analyzer.py
   for word in $(jq -r '.[].word' data/iterations/iterN_candidates.json); do
     python scripts/morphology_analyzer.py --word $word
   done
   ```

3. **Proposal Generation:**
   - Review morphological analysis
   - Create `iterN_proposals.json` with viable candidates
   - Include confidence scores and reasoning

4. **Implementation:**
   ```bash
   # Update dictionary
   python scripts/batch_dictionary_updater.py \
     --import-file data/iterations/iterN_proposals.json --backup --yes
   ```

5. **Testing:**
   ```bash
   # Re-translate folios to measure impact
   python translate_folio.py --section q01 --start 1 --end 8 --force
   ```

## Historical Iterations

| Iteration | Date | Words Added | Coverage Gain | Key Achievement |
|-----------|------|-------------|---------------|-----------------|
| 5 | Nov 27 | 35 (bugs) | +1.6% | Data quality fixes |
| 6 | Nov 27 | 5 | +0.8% | Q03-Q05 translated |
| 7 | Nov 27 | 4 | +0.0% | Conservative approach |
| 8 | Nov 27 | 8 | +1.0% | Aggressive analysis |

## Notes

- **Naming Convention:** Always use `iterN_` prefix (not `iterationN_`)
- **Location:** All iteration files go in `data/iterations/`
- **JSON Format:** Always use pretty-printed JSON with 2-space indentation
- **Backup:** Dictionary backups are stored in root as `voynich.yaml.backup-iterN-*`

## Scripts That Use This Directory

- `scripts/word_frequency.py` - Generates candidate lists
- `scripts/morphology_analyzer.py` - Analyzes morphological patterns
- `scripts/batch_dictionary_updater.py` - Imports proposals

## Maintenance

When starting a new iteration:
1. Ensure previous iteration files are complete
2. Use next sequential number (e.g., iter9)
3. Follow naming conventions strictly
4. Document results in `docs/ITERATION_N_REPORT.md`

